/*! jquery.AKjs.Mobile by Mobile Web App Plugin v1.2.4 Stable --- Copyright Andrew.Kim | (c) 20170808 ~ 20180625 AKjs.Mobile license */
/*! Coding by Andrew.Kim (E-mail: andrewkim365@qq.com) https://github.com/andrewkim365/AKjs.Mobile */
if ("undefined" == typeof jQuery) {
	throw new Error("AKjs.Mobile Plugin's JavaScript requires jQuery")
}
if (window.location.protocol == "file:") {
	throw new Error("AKjs.Mobile Plugin's Local Ajax requests are not supported")
}

function Andrew_Config(c) {
	var b = $.extend({
		MaskStyle: [],
		Responsive: true,
		touchstart: true,
		ButtonLink: true,
		fixedBar: true,
		WechatHeader: false,
		Orientation: true,
		Prompt: "",
		Topdblclick: true,
		animation: true
	},
	c);
	Andrew_sUserAgent();
	if (b.MaskStyle) {
		$("body").addClass("ak-mask_" + b.MaskStyle[0] + " ak-mask_" + b.MaskStyle[1])
	}
	if (!b.Responsive) {
		$("body").addClass("ak-screen")
	}
	if (b.Topdblclick == true) {
		var d = new Date().getTime();
		if (IsMobile) {
			var a = "touchstart"
		} else {
			var a = "click"
		}
		$("header h1").bind(a,
		function(e) {
			e.preventDefault();
			if (new Date().getTime() - d < 500) {
				$("main").animate({
					scrollTop: 0
				},
				1000)
			} else {
				d = new Date().getTime()
			}
		})
	}
	if (b.Orientation == true) {
		window.addEventListener("onorientationchange" in window ? "orientationchange": "resize",
		function() {
			if (window.orientation === 180 || window.orientation === 0) {
				$("main").addClass("scrolling");
				$(".ak-landscape").hide().remove()
			} else {
				if (window.orientation === 90 || window.orientation === -90) {
					$("input").blur();
					$("textarea").blur();
					$("main").removeClass("scrolling");
					setTimeout(function() {
						$("body").append('<div class="ak-landscape">' + b.Prompt + "</div>")
					},
					200)
				}
			}
		},
		false)
	}
	if (b.touchstart == true) {
		document.body.addEventListener("touchstart",
		function() {});
		$("main").addClass("scrolling")
	} else {
		$("*").removeClass("touchstart")
	}
	if (b.WechatHeader == true) {
		if (IsWechat) {
			$("header").addClass("dis_none_im").removeClass("dis_block_im");
			$("main").addClass("mt_0")
		} else {
			$("main").removeClass("mt_0")
		}
	}
	if (b.ButtonLink == true) {
		Andrew_HashSharp(false, false)
	} else {
		$("*").removeAttr("data-href")
	}
	if (b.animation) {
		Andrew_Animation()
	} else {
		$("*").removeAttr("data-animation")
	}
	if (b.fixedBar == true) {
		Andrew_InputFocus()
	}
	Andrew_mainHeight();
	$(window).resize(function() {
		Andrew_mainHeight()
	})
}

function Andrew_Router(c) {
	var b = $.extend({
		Router: false,
		FileFormat: ".html",
		Parameter: false,
		Animate: "",
		RouterPath: [],
		success: function() {},
		error: function() {},
		changePage: function() {}
	},
	c);
	if (b.Router == true) {
		if (window.location.protocol != "file:") {
			layout = $.ajax({
				url: b.RouterPath[1],
				async: false,
				cache: false
			});
			$("body").html(layout.responseText)
		}
		Andrew_sUserAgent();
		$(window).bind("load",
		function() {
			d(b);
			b.changePage(document.location.hash.substring(1))
		});
		$(window).bind("hashchange",
		function() {
			var e = "hashchange";
			$("header, main, footer").unbind();
			d(b, e);
			b.changePage(document.location.hash.substring(1))
		});

		function d(e, f) {
			$("main").ready(function() {
				if (document.location.hash.substring(1) != "") {
					if (f == "hashchange") {
						var g = $("footer").children("menu").find("button");
						g.each(function() {
							if (document.location.hash == $(this).attr("data-href") || document.location.hash.substring(1) == $(this).attr("data-href")) {
								$("footer").removeClass("dis_none_im")
							}
						});
						if (e.Animate) {
							$("main").addClass("dis_opa_0").removeClass("animated " + e.Animate);
							setTimeout(function() {
								$("main").removeClass("dis_opa_0").addClass("animated " + e.Animate)
							},
							100)
						}
						$("main").animate({
							"scrollTop": 0
						},
						100);
						$("body").children("div").remove();
						$(".ak-mask").remove()
					}
					var j = "./";
					if (e.RouterPath[0]) {
						j = e.RouterPath[0]
					}
					var i = new RegExp("\\.");
					var l = new RegExp("\\?");
					if (window.location.protocol != "file:") {
						if (i.test(j + document.location.hash.substring(1))) {
							var h = j + document.location.hash.substring(1)
						} else {
							if (l.test(j + document.location.hash.substring(1))) {
								var n = j + document.location.hash.substring(1).replace("?", e.FileFormat + "?")
							} else {
								var n = j + document.location.hash.substring(1) + e.FileFormat
							}
							var h = n.replace("/" + e.FileFormat, "/index" + e.FileFormat)
						}
						htmlobj = $.ajax({
							url: h,
							async: false,
							cache: false,
							success: function() {
								$("main").removeClass("dis_none_im");
								e.success(document.location.hash.substring(1))
							},
							error: function() {
								$("main").addClass("dis_none_im");
								e.error(document.location.hash.substring(1))
							}
						});
						if ($(htmlobj.responseText).prop("localName") == "template") {
							$("main").html($(htmlobj.responseText).html())
						} else {
							$("main").text('sorry! The lack of "<template></template>" elements!')
						}
						if ($($(htmlobj.responseText)).next().prop("localName") == "script") {
							var m = $($(htmlobj.responseText)).next().html()
						} else {
							if ($($(htmlobj.responseText)).next().prop("localName") == "style") {
								var m = $($(htmlobj.responseText)).next().next().html()
							}
						}
						if ($($(htmlobj.responseText)).next().next().prop("localName") == "style") {
							var k = $($(htmlobj.responseText)).next().next().html()
						} else {
							if ($($(htmlobj.responseText)).next().prop("localName") == "script") {
								var k = $($(htmlobj.responseText)).next().html()
							}
						}
						$("html").children("script").html("").remove();
						$("html").children("style").html("").remove();
						setTimeout(function() {
							$('<script type="text/javascript">' + m + "<\/script>").appendTo($("html"));
							$('<style type="text/css">' + k + "</style>").appendTo($("html"))
						},
						100)
					}
					a()
				}
			})
		}

		function a() {
			if ($("footer").find("dfn").length == 0) {
				$("footer").children().before("<dfn />");
				$("footer").children("dfn").addClass("dis_none_im").removeClass("dis_block_im")
			}
			if ($("ak-header").length > 0) {
				if ($("ak-header").attr("data-display") == "false") {
					$("header").addClass("dis_none_im").removeClass("dis_block_im")
				} else {
					if ($("ak-header").children().length > 0) {
						$("header").html($("ak-header").html())
					} else {
						$("header").html("<h1 class='text_al_c'>" + $("title").text() + "</h1>")
					}
					$("header").removeClass("dis_none_im").addClass("dis_block_im")
				}
				$("ak-header").remove()
			} else {
				$("header").addClass("dis_none_im").removeClass("dis_block_im")
			}
			if ($("ak-footer").length > 0) {
				if ($("ak-footer").attr("data-display") == "false") {
					$("footer").addClass("dis_none_im").removeClass("dis_block_im")
				} else {
					if ($("ak-footer").children().length > 0) {
						$("footer").children("dfn").html($("ak-footer").html());
						$("footer").children("dfn").removeClass("dis_none_im").addClass("dis_block_im");
						$("footer").children("menu").addClass("dis_none_im")
					} else {
						$("footer").children("dfn").addClass("dis_none_im").removeClass("dis_block_im").remove();
						$("footer").children("menu").removeClass("dis_none_im")
					}
					$("footer").removeClass("dis_none_im").addClass("dis_block_im")
				}
				$("ak-footer").remove()
			} else {
				$("footer").children("dfn").addClass("dis_none_im").removeClass("dis_block_im").remove();
				$("footer").addClass("dis_none_im").removeClass("dis_block_im")
			}
			setTimeout(function() {
				if (b.Parameter) {
					Andrew_HashSharp(true, true)
				} else {
					Andrew_HashSharp(true, false)
				}
			},
			200);
			Andrew_Animation()
		}
	}
}

function Andrew_Menu(d) {
	var c = $.extend({
		active_color: "",
		menu_icon: new Array(),
		menu_icon_active: new Array(),
		Callback: function() {}
	},
	d);
	var b = $("footer").find("menu");
	var a = $("footer").find("menu").find("button");
	if (a.length > 5) {
		a.last().remove();
		b.addClass("length5")
	} else {
		b.addClass("length" + a.length)
	}
	a.each(function() {
		var e = $(this).index();
		if ($(this).attr("data-href")) {
			var f = $(this).attr("data-href").split("?")[0]
		}
		$(this).children().eq(0).addClass(c.menu_icon[e]);
		$(this).children().removeClass(c.active_color);
		if (document.location.hash.indexOf(f) != -1 || document.location.hash.substring(1).split("?")[0].indexOf(f) != -1) {
			a.children().eq(1).removeClass(c.active_color);
			$(this).children().eq(0).removeClass(c.menu_icon[e]);
			$(this).children().eq(0).addClass(c.menu_icon_active[e]).addClass(c.active_color);
			$(this).children().eq(1).addClass(c.active_color);
			c.Callback($(this), e + 1)
		} else {
			if (document.location.hash.substring(1).split("?")[0] == "") {
				a.eq(0).children().eq(0).removeClass(c.menu_icon[0]).addClass(c.menu_icon_active[0]).addClass(c.active_color);
				a.eq(0).children().eq(1).addClass(c.active_color)
			}
		}
	});
	$(window).bind("hashchange",
	function() {
		a.each(function() {
			var e = $(this).index();
			if ($(this).attr("data-href")) {
				var f = $(this).attr("data-href").split("?")[0]
			}
			if (document.location.hash.substring(1).split("?")[0].indexOf(f) == -1) {
				$(this).children().eq(0).removeClass(c.menu_icon_active[e]).addClass(c.menu_icon[e]);
				$(this).children().eq(1).removeClass(c.active_color)
			}
		})
	})
}

function Andrew_sUserAgent() {
	var b = navigator.userAgent.toLowerCase();
	var a = window.navigator.userAgent;
	var c = window.navigator.appVersion;
	IsMobile = b.match(/(phone|pad|pod|iPhone|iPod|ios|iPad|android|Mobile|BlackBerry|IEMobile|MQQBrowser|JUC|Fennec|wOSBrowser|BrowserNG|WebOS|Symbian|Windows Phone)/i);
	IsIpad = b.match(/ipad/i) == "ipad";
	IsIphone = b.match(/iphone os/i) == "iphone os";
	IsAndroid = b.match(/android/i) == "android";
	IsWindows = b.match(/windows/i) == "windows";
	IsImac = b.match(/macintosh/i) == "Imac";
	IsWechat = b.match(/MicroMessenger/i) == "micromessenger";
	IsQQ = b.match(/QQ/i) == "qq";
	IsUc7 = b.match(/rv:1.2.3.4/i) == "rv:1.2.3.4";
	IsUc = b.match(/ucweb/i) == "ucweb";
	IsWM = b.match(/windows mobile/i) == "windows mobile";
	IsChrome = /Chrom/gi.test(a);
	IsFirefox = /firefox/gi.test(a);
	IsOpera = /opera/gi.test(a);
	IsIE = !!document.all;
	IsIE6 = !!document.all && !window.XMLHttpRequest;
	IsIE7 = !!document.all && /msie 7.0/gi.test(c);
	IsIE8 = !!document.all && /msie 8.0/gi.test(c);
	Oslanguage = (navigator.browserLanguage || navigator.language).toLowerCase()
}

function Andrew_RegsInput() {
	Regs_email = /^[0-9a-zA-Z_]+@[0-9a-zA-Z_]+[\.]{1}[0-9a-zA-Z]+[\.]?[0-9a-zA-Z]+$/;
	Regs_mobile = /^(((13[0-9]{1})|(14[0-9]{1})|(15[0-9]{1})|(17[0-9]{1})|(18[0-9]{1})|(19[0-9]{1}))\d{8})$/;
	Regs_url = /^https?:\/\/(([a-zA-Z0-9_-])+(\.)?)*(:\d+)?(\/((\.)?(\?)?=?&?[a-zA-Z0-9_-](\?)?)*)*$/i;
	Regs_idCard = /^(^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$)|(^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])((\d{4})|\d{3}[Xx])$)$/;
	Regs_postal = /^[1-9]\d{5}(?!\d)$/;
	Regs_date = /^[1-2][0-9][0-9][0-9]-[0-1]{0,1}[0-9]-[0-3]{0,1}[0-9]$/;
	Regs_qq = /^[1-9][0-9]{4,9}$/;
	Regs_numAll = /"^\d+$/;
	Regs_userBefit = /^[a-z0-9]+$/i;
	Regs_pwdBefit = /^\w+$/
}

function Andrew_InputFocus() {
	Andrew_sUserAgent();
	$('main input[type="text"],main input[type="number"], main input[type="tel"], main input[type="email"]').on("focus",
	function() {
		var c = this;
		a(c)
	});
	$('main input[type="password"]').not('main input[type="password"][multiple]').on("focus",
	function() {
		var c = this;
		a(c)
	});
	$('main input[type="password"][multiple]').on("focus",
	function(d) {
		d.preventDefault();
		var c = this;
		a(c);
		if (IsIphone || IsIpad) {
			if ($("body").scrollTop() > 0) {
				$("header").addClass("dis_opa_0")
			}
			$("footer").addClass("dis_opa_0")
		}
	});
	$("main textarea").focus(function() {
		var c = this;
		a(c)
	});
	$('main input[type="text"],main input[type="number"], main input[type="tel"], main input[type="email"]').on("blur",
	function() {
		b()
	});
	$('main input[type="password"]').not('main input[type="password"][multiple]').on("blur",
	function() {
		b()
	});
	$('main input[type="password"][multiple]').on("blur",
	function() {
		b();
		$("header, footer").removeClass("dis_opa_0")
	});
	$("main textarea").on("blur",
	function() {
		b()
	});
	$("footer input").focus(function(c) {
		c.preventDefault();
		$("header, footer").bind({
			touchmove: function(d) {
				d.preventDefault();
				d.stopPropagation()
			}
		});
		if (IsIphone || IsIpad) {
			$("main").on({
				touchmove: function() {
					document.activeElement.blur();
					if ($("header").length > 0) {
						$("header").css({
							"margin-top": 0
						})
					}
				}
			});
			if ($("header").length > 0) {
				setTimeout(function() {
					if ($("body").scrollTop() > 0) {
						$("header").animate({
							"margin-top": $("body").scrollTop()
						})
					} else {
						$("header").css({
							"margin-top": 0
						})
					}
				},
				200)
			}
			if ($("footer").length > 0) {
				$("footer").css({
					//"margin-bottom": Andrew_GetScrollTop()
				})
			}
		}
	});
	$("footer input").on("blur",
	function() {
		$("main").unbind("touchstart");
		$("main").unbind("touchmove");
		if (IsIphone || IsIpad) {
			if ($("header").length > 0) {
				$("header").css({
					"margin-top": 0
				})
			}
		}
	});

	function b() {
		$("main").unbind("touchstart");
		$("main").unbind("touchmove");
		if (IsIphone || IsIpad) {
			$("main").removeClass("pb_100");
			$("footer").removeClass("minus_bottom_100")
		} else {
			if (IsAndroid) {
				$("footer").removeClass("dis_opa_0")
			}
		}
		if ($("header").length > 0) {
			$("header").css({
				"margin-top": 0
			})
		}
		$("header").show()
	}

	function a(c) {
		if (IsIphone || IsIpad) {
			setTimeout(function() {
				$("main").animate({
					scrollTop: $("main").scrollTop()
				},
				100)
			},
			100);
			if ($("header").length > 0) {
				setTimeout(function() {
					$("header").animate({
						"margin-top": Andrew_GetScrollTop() - 1
					})
				},
				200);
				$("main").on({
					touchmove: function() {
						$("header").css({
							"margin-top": 0
						})
					}
				})
			}
			$("main").addClass("pb_100");
			$("footer").addClass("minus_bottom_100")
		} else {
			if (IsAndroid) {
				if ($("header").length > 0) {
					$("header").css({
						"margin-top": 0
					})
				}
				setTimeout(function() {
					c.scrollIntoView(true)
				},
				100)
			}
		}
	}
}

function Andrew_GetScrollTop() {
	var a = 0;
	if (document.documentElement && document.documentElement.scrollTop) {
		a = document.documentElement.scrollTop
	} else {
		if (document.body) {
			a = document.body.scrollTop
		}
	}
	return a
}

function Andrew_Responsive(c) {
	var b = $.extend({
		resizeCallback: function() {}
	},
	c);

	function a() {
		var e = window.screen.width;
		var d = window.screen.height;
		if (window.innerWidth) {
			viewport_width = window.innerWidth
		} else {
			if ((document.body) && (document.body.clientWidth)) {
				viewport_width = document.body.clientWidth
			}
		}
		if (window.innerHeight) {
			viewport_height = window.innerHeight
		} else {
			if ((document.body) && (document.body.clientHeight)) {
				viewport_height = document.body.clientHeight
			}
		}
		if (document.documentElement && document.documentElement.clientHeight && document.documentElement.clientWidth) {
			viewport_height = document.documentElement.clientHeight;
			viewport_width = document.documentElement.clientWidth
		}
		b.resizeCallback(e, d, viewport_width, viewport_height)
	}
	window.onresize = function() {
		a()
	}
}

function Andrew_mainHeight() {
	Andrew_sUserAgent();
	if (IsMobile) {
		$("main, textarea").removeClass("scrollbar");
		$(".bar_hide").removeClass("scrollbar_hide");
		$("body").addClass("fix").css({
			width: window.innerWidth,
			height: window.innerHeight
		})
	} else {
		$("main, textarea").addClass("scrollbar");
		$(".bar_hide").addClass("scrollbar_hide");
		$("body").removeClass("fix").removeAttr("style")
	}
	setTimeout(function() {
		if ($("header").hasClass("dis_none_im") && $("footer").hasClass("dis_none_im")) {
			$("main").css({
				"margin-top": 0,
				//"margin-bottom": 0,
				"height": $(window).height()
			})
		} else {
			if ($("header").hasClass("dis_none_im") && !$("footer").hasClass("dis_none_im")) {
				$("main").css({
					"margin-top": 0,
					//"margin-bottom": $("footer").outerHeight(),
					"height": $(window).height() - $("footer").outerHeight()
				})
			} else {
				if (!$("header").hasClass("dis_none_im") && $("footer").hasClass("dis_none_im")) {
					$("main").css({
						"margin-top": $("header").outerHeight(),
						//"margin-bottom": 0,
						"height": $(window).height() - $("header").outerHeight()
					})
				} else {
					if (!$("header").hasClass("dis_none_im") && !$("footer").hasClass("dis_none_im")) {
						$("main").css({
							"margin-top": $("header").outerHeight(),
							//"margin-bottom": $("footer").outerHeight(),
							"height": $(window).height() - ($("header").outerHeight() + $("footer").outerHeight())
						})
					}
				}
			}
		}
		if ($("header").length === 0 && $("footer").length > 0) {
			$("main").css({
				"height": $(window).height() - $("footer").outerHeight()
			})
		} else {
			if ($("header").length > 0 && $("footer").length === 0) {
				$("main").css({
					"height": $(window).height() - $("header").outerHeight()
				})
			} else {
				if ($("header").length === 0 && $("footer").length === 0) {
					$("main").css({
						"height": $(window).height()
					})
				}
			}
		}
		$("main").css({
			"top": "0",
			"bottom": "0",
			"left": "0",
			"right": "0",
		});
		$(".h_fill").css({
			"height": $(window).height()
		})
	},
	100)
}

function Andrew_Ajax(b) {
	var a = $.extend({
		to: "",
		type: "POST",
		url: "",
		data: {},
		async: false,
		cache: false,
		success: function() {},
		error: function() {}
	},
	b);
	if (window.location.protocol != "file:") {
		htmlobj = $.ajax({
			type: a.type,
			url: a.url,
			data: a.data,
			async: a.async,
			cache: a.cache,
			success: function(c) {
				a.success(c);
				if ($(a.to)) {
					$(a.to).html(htmlobj.responseText)
				}
				Andrew_HashSharp(true, false);
				Andrew_Animation()
			},
			error: function(c) {
				if ($(a.to)) {
					$(a.to).html(htmlobj.responseText)
				}
				a.error(c)
			}
		})
	}
}

function Andrew_Animation() {
	$("*[data-animation]").each(function() {
		var ani_ele = $(this);
		var ani_s = new RegExp("s");
		var animated_each = ani_ele.attr("data-animation");
		aniJson_each = eval("(" + animated_each + ")");
		if (aniJson_each.name) {
			ani_ele.removeClass("animated " + aniJson_each.name);
			ani_ele.addClass("animated " + aniJson_each.name)
		}
		if (aniJson_each.duration) {
			if (ani_s.test(aniJson_each.duration)) {
				ani_ele.css({
					"animation-duration": parseInt(aniJson_each.duration)
				})
			} else {
				ani_ele.css({
					"animation-duration": parseInt(aniJson_each.duration) + "s"
				})
			}
		}
		if (aniJson_each.delay) {
			if (ani_s.test(aniJson_each.delay)) {
				ani_ele.css({
					"animation-delay": parseInt(aniJson_each.delay)
				})
			} else {
				ani_ele.css({
					"animation-delay": parseInt(aniJson_each.delay) + "s"
				})
			}
		}
	})
}

function Andrew_HashSharp(f, c) {
	var e = new RegExp("#");
	var b = new RegExp("./");
	var h = new RegExp("\\?#");
	var d = new RegExp("javascript");
	var g = new RegExp("\\?");
	var a = new RegExp("akjs=");
	$("*[data-href]").unbind("click");
	if (Andrew_getUrlParam("akjs") != null || e.test(document.location.hash)) {
		$("*[data-href]").bind("click",
		function(i) {
			i.preventDefault();
			if (e.test($(this).attr("data-href"))) {
				if (g.test($(this).attr("data-href"))) {
					if (a.test($(this).attr("data-href"))) {
						if (c) {
							document.location.href = Andrew_changeURLArg($(this).attr("data-href"), "akjs", new Date().getTime())
						} else {
							document.location.href = $(this).attr("data-href")
						}
					} else {
						if (c) {
							document.location.href = $(this).attr("data-href") + "&akjs=" + new Date().getTime()
						} else {
							document.location.href = $(this).attr("data-href")
						}
					}
				} else {
					if (c) {
						document.location.href = $(this).attr("data-href") + "?akjs=" + new Date().getTime()
					} else {
						document.location.href = $(this).attr("data-href")
					}
				}
				$(this).attr("data-href", $(this).attr("data-href").replace("#", ""))
			} else {
				if (d.test($(this).attr("data-href"))) {
					document.location.replace($(this).attr("data-href"))
				} else {
					if (h.test(document.location.href)) {
						document.location.replace(document.location.href.replace("?#", "#"))
					} else {
						if (g.test($(this).attr("data-href"))) {
							if (a.test($(this).attr("data-href"))) {
								if (c) {
									document.location.href = Andrew_changeURLArg("#" + $(this).attr("data-href"), "akjs", new Date().getTime())
								} else {
									document.location.href = "#" + $(this).attr("data-href")
								}
							} else {
								if (c) {
									document.location.href = "#" + $(this).attr("data-href") + "&akjs=" + new Date().getTime()
								} else {
									document.location.href = "#" + $(this).attr("data-href")
								}
							}
						} else {
							if (b.test($(this).attr("data-href"))) {
								var k = document.location.hash;
								var j = k.lastIndexOf("/");
								k = k.substring(0, j) + "/";
								k = k.replace("#", "");
								if (c) {
									document.location.href = "#" + $(this).attr("data-href").replace("./", k) + "?akjs=" + new Date().getTime()
								} else {
									document.location.href = "#" + $(this).attr("data-href").replace("./", k)
								}
							} else {
								if (c) {
									document.location.href = "#" + $(this).attr("data-href") + "?akjs=" + new Date().getTime()
								} else {
									document.location.href = "#" + $(this).attr("data-href")
								}
							}
						}
					}
				}
			}
		})
	} else {
		$("*[data-href]").bind("click",
		function(i) {
			i.preventDefault();
			document.location.href = $(this).attr("data-href")
		})
	}
	if (f == true) {
		$("form[action]").each(function() {
			var i = new RegExp("#");
			if (Andrew_getUrlParam("akjs") && i.test(document.location.hash)) {
				if (!i.test($(this).attr("action"))) {
					if (c) {
						$(this).attr("action", "#/" + $(this).attr("action") + "?akjs=" + new Date().getTime())
					} else {
						$(this).attr("action", "#/" + $(this).attr("action"))
					}
				}
			}
		})
	}
}

function Andrew_Include(a) {
	Andrew_pathURL();
	var g = new RegExp(".js");
	var d = new RegExp(".css");
	var f = new RegExp("http");
	if (g.test(a)) {
		var e = document.createElement("script");
		e.setAttribute("type", "text/javascript");
		e.setAttribute("data-akjs", new Date().getTime());
		if (f.test(a)) {
			e.setAttribute("src", a)
		} else {
			e.setAttribute("src", realPath + "/" + a + "?akjs=" + new Date().getTime())
		}
	} else {
		if (d.test(a)) {
			var e = document.createElement("link");
			e.setAttribute("rel", "stylesheet");
			e.setAttribute("type", "text/css");
			e.setAttribute("data-akjs", new Date().getTime());
			if (f.test(a)) {
				e.setAttribute("src", a)
			} else {
				e.setAttribute("href", realPath + "/" + a + "?akjs=" + new Date().getTime())
			}
		}
	}
	if (typeof e != "undefined") {
		if (g.test(a)) {
			var b = "script";
			var c = "src"
		} else {
			if (d.test(a)) {
				var b = "link";
				var c = "href"
			}
		}
		$("head").find(b).each(function() {
			if ($(this).data("akjs")) {
				if ($(this).attr(c).indexOf(a) != -1) {
					$(this).remove()
				}
			}
		});
		$(e).appendTo($("head"))
	} else {
		console.info("load include {" + a + "} file method error!")
	}
}

function Andrew_Location(a, b) {
	Andrew_sUserAgent();
	if (IsIphone || IsIpad) {
		switch (b) {
		case "href":
			document.location.href = "#" + a;
			break;
		case "history":
			history.back(a);
			break;
		case "reload":
			document.location.reload();
			break;
		default:
			document.location.replace("#" + a);
			break
		}
	} else {
		switch (b) {
		case "href":
			window.location.href = "#" + a;
			break;
		case "history":
			window.back(a);
			break;
		case "reload":
			window.location.reload();
			break;
		default:
			window.location.replace("#" + a);
			break
		}
	}
}

function Andrew_getUrlParam(c) {
	var d = new RegExp("(^|&)" + c + "=([^&]*)(&|$)");
	var b = document.location.search.substr(1);
	var a = document.location.hash.split("?");
	if (a.length == 2) {
		b = a[1]
	}
	var e = b.match(d);
	if (e != null) {
		return unescape(e[2])
	}
	return null
}

function Andrew_changeURLArg(url, arg, arg_val) {
	var pattern = arg + "=([^&]*)";
	var replaceText = arg + "=" + arg_val;
	if (url.match(pattern)) {
		var tmp = "/(" + arg + "=)([^&]*)/gi";
		tmp = url.replace(eval(tmp), replaceText);
		return tmp
	} else {
		if (url.match("[?]")) {
			return url + "&" + replaceText
		} else {
			return url + "?" + replaceText
		}
	}
	return url + "\n" + arg + "\n" + arg_val
}

function Andrew_Params(c) {
	var b = new RegExp("\\#/");
	if (b.test(document.location.hash)) {
		hash_arr = (location.hash || "").replace(/^\#/, "").split("&")
	} else {
		hash_arr = (location.hash || "").replace(/^\#/, "/").split("&")
	}
	var d = [];
	for (var a = 0; a < hash_arr.length; a++) {
		d.push(hash_arr[a].split("/"))
	}
	return d[0][c]
}

function Andrew_pathURL() {
	var f = new RegExp("#");
	var g = new RegExp("\\?");
	var b = new RegExp("[.]");
	wwwPath = window.document.location.href;
	pathName = window.document.location.pathname;
	if (!f.test(wwwPath)) {
		var h = pathName.split("/");
		var e = "";
		for (var d = 0; d < h.length; d++) {
			if (b.test(h[d])) {
				e = h[d]
			}
		}
		if (e == "") {
			if (g.test(wwwPath)) {
				var a = wwwPath.split("?")[0];
				realPath = a
			} else {
				realPath = wwwPath
			}
		} else {
			var c = new RegExp(e + ".*");
			realPath = c.test(wwwPath) ? wwwPath.replace(c, "") : wwwPath
		}
	} else {
		var h = wwwPath.split("/");
		var e = "";
		for (var d = 0; d < h.length; d++) {
			if (f.test(h[d])) {
				e = h[d]
			}
		}
		if (g.test(wwwPath)) {
			if (f.test(wwwPath)) {
				var a = wwwPath.split("?")[0];
				var h = pathName.split("/");
				var e = "";
				for (var d = 0; d < h.length; d++) {
					if (b.test(h[d])) {
						e = h[d]
					}
				}
				realPath = wwwPath.replace(e, "");
				var a = realPath.split("?")[0];
				realPath = a
			} else {
				var a = wwwPath.split("?")[0];
				realPath = a
			}
		} else {
			var c = new RegExp(e + "/.*");
			realPath = c.test(wwwPath) ? wwwPath.replace(c, "") : wwwPath
		}
	}
}

function Andrew_setCookie(b, f, c) {
	var e = new Date();
	e.setTime(e.getTime() + (c * 24 * 60 * 60 * 1000));
	var a = "expires=" + e.toUTCString();
	document.cookie = b + "=" + f + "; " + a
}

function Andrew_getCookie(d) {
	var b = d + "=";
	var a = document.cookie.split(";");
	for (var e = 0; e < a.length; e++) {
		var f = a[e];
		while (f.charAt(0) == " ") {
			f = f.substring(1)
		}
		if (f.indexOf(b) != -1) {
			return f.substring(b.length, f.length)
		}
	}
	return ""
}

function Andrew_delCookie(a) {
	Andrew_setCookie(a, "", -1)
}

function Andrew_Unicode(e) {
	var b, d, a, f;
	b = "";
	a = e.length;
	for (d = 0; d < a; d++) {
		f = e.charCodeAt(d);
		if ((f >= 1) && (f <= 127)) {
			b += e.charAt(d)
		} else {
			if (f > 2047) {
				b += String.fromCharCode(224 | ((f >> 12) & 15));
				b += String.fromCharCode(128 | ((f >> 6) & 63));
				b += String.fromCharCode(128 | ((f >> 0) & 63))
			} else {
				b += String.fromCharCode(192 | ((f >> 6) & 31));
				b += String.fromCharCode(128 | ((f >> 0) & 63))
			}
		}
	}
	return b
}

function Andrew_htmlEncode(b) {
	var a = "";
	if (b.length == 0) {
		return ""
	}
	a = b.replace(/&/g, ">");
	a = a.replace(/</g, "<");
	a = a.replace(/>/g, ">");
	a = a.replace(/ /g, " ");
	a = a.replace(/\'/g, "'");
	a = a.replace(/\"/g, '"');
	a = a.replace(/\n/g, "<br>");
	return a
}

function Andrew_htmlDecode(b) {
	var a = "";
	if (b.length == 0) {
		return ""
	}
	a = b.replace(/>/g, "&");
	a = a.replace(/</g, "<");
	a = a.replace(/>/g, ">");
	a = a.replace(/ /g, " ");
	a = a.replace(/'/g, "'");
	a = a.replace(/"/g, '"');
	a = a.replace(/<br>/g, "\n");
	return a
}

function Andrew_FileFormat(a) {
	var e = /\.[^\.]+$/.exec(a);
	var c = new String(e);
	var b = c.toLowerCase();
	return b
}

function Andrew_DateFormat(b, c) {
	if (b.constructor === Date) {
		var e = b
	} else {
		if (b.constructor === String) {
			var e = new Date(Date.parse(b.replace(/-/g, "/")))
		} else {
			var e = new Date()
		}
	}
	var a = function(h, g) {
		if (!g) {
			g = 2
		}
		h = String(h);
		for (var f = 0,
		d = ""; f < (g - h.length); f++) {
			d += "0"
		}
		return d + h
	};
	return c.replace(/"[^"]*"|'[^']*'|\b(?:d{1,4}|m{1,4}|yy(?:yy)?|([hHMstT])\1?|[lLZ])\b/g,
	function(f) {
		switch (f) {
		case "d":
			return e.getDate();
		case "dd":
			return a(e.getDate());
		case "M":
			return e.getMonth() + 1;
		case "MM":
			return a(e.getMonth() + 1);
		case "yy":
			return String(e.getFullYear()).substr(2);
		case "yyyy":
			return e.getFullYear();
		case "h":
			return e.getHours() % 12 || 12;
		case "hh":
			return a(e.getHours() % 12 || 12);
		case "H":
			return e.getHours();
		case "HH":
			return a(e.getHours());
		case "m":
			return e.getMinutes();
		case "mm":
			return a(e.getMinutes());
		case "s":
			return e.getSeconds();
		case "ss":
			return a(e.getSeconds());
		case "l":
			return a(e.getMilliseconds(), 3);
		case "L":
			var d = e.getMilliseconds();
			if (d > 99) {
				d = Math.round(d / 10)
			}
			return a(d);
		case "tt":
			return e.getHours() < 12 ? "am": "pm";
		case "TT":
			return e.getHours() < 12 ? "AM": "PM";
		case "Z":
			return e.toUTCString().match(/[A-Z]+$/);
		default:
			return f.substr(1, f.length - 2)
		}
	})
}

function Andrew_Plugin(d, c) {
	var e = d.split("|");
	if (window.location.protocol != "file:") {
		for (var b = 0; b < e.length; b++) {
			$.ajax({
				type: "GET",
				url: js_folder + "plugin/" + d + ".js?akjs=" + new Date().getTime(),
				async: false,
				cache: false,
				dataType: "script"
			})
		}
		if (c) {
			var a = "'" + js_folder + "plugin/css/" + d + ".css?akjs=" + new Date().getTime() + "'";
			$("head").find("link").filter("#" + d).remove();
			$("head").find("link:first").before("<link rel='stylesheet' type='text/css' id='" + d + "' href=" + a + " />")
		}
	}
}
var scripts = document.scripts;
js_folder = scripts[scripts.length - 1].src.substring(0, scripts[scripts.length - 1].src.lastIndexOf("/") + 1);